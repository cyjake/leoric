<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BIGINT.html">BIGINT</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Bone.html">Bone</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.attribute">attribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.belongsTo">belongsTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.describe">describe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.find">find</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.findOne">findOne</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.hasAttribute">hasAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.hasMany">hasMany</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.hasOne">hasOne</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.include">include</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.renameAttribute">renameAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#.update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#_clone">_clone</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#attribute">attribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#attributeChanged">attributeChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#attributeWas">attributeWas</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#changed">changed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#changes">changes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#hasAttribute">hasAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#previousChanged">previousChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#previousChanges">previousChanges</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#save">save</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#toJSON">toJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#toObject">toObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#upsert">upsert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#util.inspect.custom">util.inspect.custom</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Bone.html#validate">validate</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Collection.html">Collection</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Collection.html#.init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Collection.html#save">save</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Collection.html#toJSON">toJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Collection.html#toObject">toObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="DataType.html">DataType</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="IndexHint.IndexHint.html">IndexHint</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="INTEGER.html">INTEGER</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Spell.html">Spell</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$delete">$delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$forceIndex">$forceIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$from">$from</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$get">$get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$group">$group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$having">$having</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$ignoreIndex">$ignoreIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$join">$join</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$limit">$limit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$offset">$offset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$optimizerHints">$optimizerHints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$order">$order</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$select">$select</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$useIndex">$useIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$where">$where</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#$with">$with</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#batch">batch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#catch">catch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#finally">finally</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#nodeify">nodeify</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#then">then</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#toSqlString">toSqlString</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Spell.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="STRING.html">STRING</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-lib_bone.html">lib/bone</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_bone.html#~copyValues">copyValues</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-lib_expr.html">lib/expr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~copyExpr">copyExpr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~findExpr">findExpr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~parseExpr">parseExpr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~parseExprList">parseExprList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~precedes">precedes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_expr.html#~walkExpr">walkExpr</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-lib_spell.html">lib/spell</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~findAssociation">findAssociation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~isOperatorCondition">isOperatorCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~joinAssociation">joinAssociation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~joinOnConditions">joinOnConditions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseConditions">parseConditions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseLogicalObjectCondition">parseLogicalObjectCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseObjectConditions">parseObjectConditions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseObjectValue">parseObjectValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseOperatorCondition">parseOperatorCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~parseSet">parseSet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-lib_spell.html#~scopeDeletedAt">scopeDeletedAt</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#executeValidator">executeValidator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#findModels">findModels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#formatArgs">formatArgs</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#INDEX_HINT_SCOPE">INDEX_HINT_SCOPE</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#INDEX_HINT_TYPE">INDEX_HINT_TYPE</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isDispatchable">isDispatchable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setupHooks">setupHooks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setupSingleHook">setupSingleHook</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1 id="leoric">Leoric</h1>
<p><a href="https://www.npmjs.com/package/leoric"><img src="https://img.shields.io/npm/dm/leoric.svg?style=flat" alt="NPM Downloads"></a>
<a href="https://www.npmjs.com/package/leoric"><img src="http://img.shields.io/npm/v/leoric.svg?style=flat" alt="NPM Version"></a>
<a href="https://travis-ci.org/cyjake/leoric"><img src="https://travis-ci.org/cyjake/leoric.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/cyjake/leoric?branch=master"><img src="https://coveralls.io/repos/github/cyjake/leoric/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p>Leoric is an object-relational mapping for Node.js, which is heavily influenced by Active Record of Ruby on Rails. See the <a href="https://leoric.js.org">documentation</a> for detail.</p>
<h2 id="usage">Usage</h2>
<p>Assume the tables of posts, users, and comments were setup already. We may declare the models as classes by extending from the base class <code>Bone</code> of Leoric. After the models are connected to the database, the columns of the tables are mapped as attributes, the associations are setup, feel free to start querying.</p>
<pre class="prettyprint source lang-js"><code>const { Bone, connect } = require('leoric')

// define model
class Post extends Bone {
  static describe() {
    this.belongsTo('author', { Model: 'User' })
    this.hasMany('comments')
  }
}

async function main() {
  // connect models to database
  await connect({ host: 'example.com', models: [ Post ], /* among other options */ })

  // CRUD
  await Post.create({ title: 'New Post' })
  const post = await Post.findOne({ title: 'New Post' })
  post.title = 'Untitled'
  await post.save()

  // or UPDATE directly
  await Post.update({ title: 'Untitled' }, { title: 'New Post' })

  // find with associations
  const post = await Post.findOne({ title: 'New Post' }).with('comments')
  console.log(post.comments) // => [ Comment { id, content }, ... ]
}
</code></pre>
<p>If table structures were intended to be maintained in the models, Leoric can be used as a table migration tool as well. We can just define attributes in the models, and call <code>realm.sync()</code> whenever we are ready.</p>
<pre class="prettyprint source lang-js"><code>const { BIGINT, STRING } = Bone.DataTypes;
class Post extends Bone {
  static attributes = {
    id: { type: BIGINT, primayKey: true },
    email: { type: STRING, allowNull: false },
    nickname: { type: STRING, allowNull: false },
  }
}

const realm = new Realm({ models: [ Post ] });
await realm.sync();
</code></pre>
<h2 id="syntax-table">Syntax Table</h2>
<table>
<thead>
<tr>
<th>JavaScript</th>
<th>SQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Post.create({ title: 'New Post' })</code></td>
<td><code>INSERT INTO posts (title) VALUES ('New Post')</code></td>
</tr>
<tr>
<td><code>Post.all</code></td>
<td><code>SELECT * FROM posts</code></td>
</tr>
<tr>
<td><code>Post.find({ title: 'New Post' })</code></td>
<td><code>SELECT * FROM posts WHERE title = 'New Post'</code></td>
</tr>
<tr>
<td><code>Post.find(42)</code></td>
<td><code>SELECT * FROM posts WHERE id = 42</code></td>
</tr>
<tr>
<td><code>Post.order('title')</code></td>
<td><code>SELECT * FROM posts ORDER BY title</code></td>
</tr>
<tr>
<td><code>Post.order('title', 'desc')</code></td>
<td><code>SELECT * FROM posts ORDER BY title DESC</code></td>
</tr>
<tr>
<td><code>Post.limit(20)</code></td>
<td><code>SELECT * FROM posts LIMIT 0, 20</code></td>
</tr>
<tr>
<td><code>Post.update({ id: 42 }, { title: 'Skeleton King' })</code></td>
<td><code>UPDATE posts SET title = 'Skeleton King' WHERE id = 42</code></td>
</tr>
<tr>
<td><code>Post.remove({ id: 42 })</code></td>
<td><code>DELETE FROM posts WHERE id = 42</code></td>
</tr>
</tbody>
</table>
<p>A more detailed syntax table may be found at the <a href="https://leoric.js.org/#syntax-table">documentation</a> site.</p>
<h2 id="contributing">Contributing</h2>
<p>There are many ways in which you can participate in the project, for example:</p>
<ul>
<li><a href="https://github.com/cyjake/leoric/issues">Submit bugs and feature requests</a>, and help us verify as they are checked in</li>
<li><a href="https://github.com/cyjake/leoric/pulls">Review source code changes</a></li>
<li>Review the <a href="https://leoric.js.org">documentation</a> and make pull requests for anything from typo to new content</li>
</ul>
<p>If you are interested in fixing issues and contributing directly to the code base, please see the document <a href="https://leoric.js.org/contributing/guides">How to Contribute</a>, which covers the following:</p>
<ul>
<li>The development workflow, including debugging and running tests</li>
<li>Coding guidelines</li>
<li>Submitting pull requests</li>
<li>Contributing to translations</li>
</ul>
<h2 id="related-projects">Related Projects</h2>
<p>If developing web applications with <a href="https://eggjs.org/">egg framework</a>, it's highly recommended using the <a href="https://github.com/eggjs/egg-orm">egg-orm</a> plugin.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue Jun 15 2021 23:08:14 GMT+0800 (China Standard Time) using the Minami theme.
</footer>

<script src="scripts/prettify/prettify.js"></script>
<script src="scripts/prettify/lang-css.js"></script>
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script>
prettyPrint();
Array.from(document.querySelectorAll('dl.details'), function(el) {
    if (el.children.length == 0) el.classList.add('empty')
})
</script>
</body>
</html>